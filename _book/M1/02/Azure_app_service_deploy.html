
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>2.4. Explore Azure App Service deployment slots · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lab01.html" />
    
    
    <link rel="prev" href="Scaling_app_service.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    AZURE JOURNEY
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop Azure Compute Solutions</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../01/">
            
                <a href="../01/">
            
                    
                    1. Implement IaaS solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../01/Provision_vm.html">
            
                <a href="../01/Provision_vm.html">
            
                    
                    1.1. Provision virtual machines in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../01/Create_arm.html">
            
                <a href="../01/Create_arm.html">
            
                    
                    1.2. Create and deploy Azure Resource Manager templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../01/Manage_container.html">
            
                <a href="../01/Manage_container.html">
            
                    
                    1.3. Manage container images in Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../01/Run_container.html">
            
                <a href="../01/Run_container.html">
            
                    
                    1.4 Run container images in Azure Container Instances
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on LABS</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../01/lab01.html">
            
                <a href="../01/lab01.html">
            
                    
                    Lab 01 - Create a VM by using the Azure Command-Line Interface (CLI)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../01/lab02.html">
            
                <a href="../01/lab02.html">
            
                    
                    Lab 02 - Create a Docker container image and deploy it to Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../01/lab03.html">
            
                <a href="../01/lab03.html">
            
                    
                    Lab 03 - Deploy an Azure container instance
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="./">
            
                <a href="./">
            
                    
                    2. Create Azure App Service Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="Azure_app_service.html">
            
                <a href="Azure_app_service.html">
            
                    
                    2.1. Explore Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="Config_app_service.html">
            
                <a href="Config_app_service.html">
            
                    
                    2.2. Configure web app settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="Scaling_app_service.html">
            
                <a href="Scaling_app_service.html">
            
                    
                    2.3. Scale apps in Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.4" data-path="Azure_app_service_deploy.html">
            
                <a href="Azure_app_service_deploy.html">
            
                    
                    2.4. Explore Azure App Service deployment slots
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="lab01.html">
            
                <a href="lab01.html">
            
                    
                    LAB 01 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="lab02.html">
            
                <a href="lab02.html">
            
                    
                    LAB 02 - Build a front-end web application by using Azure Web Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="lab03.html">
            
                <a href="lab03.html">
            
                    
                    LAB 03 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../03/">
            
                <a href="../03/">
            
                    
                    3. Implemente Azure functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../03/Azure_functions.html">
            
                <a href="../03/Azure_functions.html">
            
                    
                    3.1. Explore Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../03/Develop_azure_functions.html">
            
                <a href="../03/Develop_azure_functions.html">
            
                    
                    3.2. Develop Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../03/Implement_functions.html">
            
                <a href="../03/Implement_functions.html">
            
                    
                    3.3. Implement Durable Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../03/lab01.html">
            
                <a href="../03/lab01.html">
            
                    
                    LAB 01 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../03/lab02.html">
            
                <a href="../03/lab02.html">
            
                    
                    LAB 02 - Configure a local Azure Functions project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../03/lab03.html">
            
                <a href="../03/lab03.html">
            
                    
                    LAB 03 - Create a function that’s triggered by an HTTP request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../03/lab04.html">
            
                <a href="../03/lab04.html">
            
                    
                    LAB 04 - Create a function that triggers on a schedule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../03/lab05.html">
            
                <a href="../03/lab05.html">
            
                    
                    LAB 05 - Create a function that integrates with other services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../03/lab06.html">
            
                <a href="../03/lab06.html">
            
                    
                    LAB 06 - Deploy a local function project to an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../03/lab07.html">
            
                <a href="../03/lab07.html">
            
                    
                    LAB 07 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop for Azure storage</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../../M2/01/">
            
                <a href="../../M2/01/">
            
                    
                    4. Develop solutions that use Cosmos DB storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../../M2/02/">
            
                <a href="../../M2/02/">
            
                    
                    5. Develop solutions that use blob storage
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >2.4. Explore Azure App Service deployment slots</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="staging-environments">Staging environments</h2>
<p>When you deploy your web app, web app on Linux, mobile back end, or API app to Azure App Service, you can use a separate deployment slot instead of the default production slot when you&apos;re running in the <strong>Standard</strong>, <strong>Premium</strong>, or <strong>Isolated</strong> App Service plan tier. Deployment slots are live apps with their own host names. App content and configurations elements can be swapped between two deployment slots, including the production slot.</p>
<p>Deploying your application to a non-production slot has the following benefits:</p>
<ul>
<li>You can validate app changes in a staging deployment slot before swapping it with the production slot.</li>
<li>Deploying an app to a slot first and swapping it into production makes sure that all instances of the slot are warmed up before being swapped into production. This eliminates downtime when you deploy your app. The traffic redirection is seamless, and no requests are dropped because of swap operations. You can automate this entire workflow by configuring auto swap when pre-swap validation isn&apos;t needed.</li>
<li>After a swap, the slot with previously staged app now has the previous production app. If the changes swapped into the production slot aren&apos;t as you expect, you can perform the same swap immediately to get your &quot;last known good site&quot; back.</li>
</ul>
<p><br></p>
<h2 id="slot-swapping">Slot swapping</h2>
<p>When you swap slots (for example, from a staging slot to the production slot), App Service does the following to ensure that the target slot doesn&apos;t experience downtime:</p>
<p><img src="images/app_service_deploy_01.png" alt="alt text"></p>
<p>At any point of the swap operation, all work of initializing the swapped apps happens on the source slot. The target slot remains online while the source slot is being prepared and warmed up, regardless of where the swap succeeds or fails. To swap a staging slot with the production slot, make sure that the production slot is always the target slot. This way, the swap operation doesn&apos;t affect your production app.</p>
<p>When you clone configuration from another deployment slot, the cloned configuration is editable. Some configuration elements follow the content across a swap (not slot specific), whereas other configuration elements stay in the same slot after a swap (slot specific). The following table shows the settings that change when you swap slots.</p>
<p><img src="images/app_service_deploy_02.png" alt="alt text"></p>
<p>Features marked with an asterisk (*) are planned to be unswapped.</p>
<p>To configure an app setting or connection string to stick to a specific slot (not swapped), go to the Configuration page for that slot. Add or edit a setting, and then select <strong>Deployment slot setting</strong>. Selecting this check box tells App Service that the setting is not swappable.</p>
<p><br></p>
<h2 id="swap-deployment-slots">Swap deployment slots</h2>
<p>You can swap deployment slots on your app&apos;s Deployment slots page and the Overview page. Before you swap an app from a deployment slot into production, make sure that production is your target slot and that all settings in the source slot are configured exactly as you want to have them in production.</p>
<p><img src="images/app_service_deploy_03.png" alt="alt text"></p>
<h3 id="manually-swapping-deployment-slots">Manually swapping deployment slots</h3>
<p>To swap deployment slots:</p>
<ol>
<li><p>Go to your app&apos;s <strong>Deployment slots</strong> page and select <strong>Swap</strong>. The Swap dialog box shows settings in the selected source and target slots that will be changed.</p>
</li>
<li><p>Select the desired <strong>Source</strong> and <strong>Target</strong> slots. Usually, the target is the production slot. Also, select the <strong>Source Changes</strong> and <strong>Target Changes</strong> tabs and verify that the configuration changes are expected. When you&apos;re finished, you can swap the slots immediately by selecting <strong>Swap</strong>.</p>
</li>
</ol>
<p>To see how your target slot would run with the new settings before the swap actually happens, don&apos;t select Swap, but follow the instructions in Swap with preview below.</p>
<ol>
<li>When you&apos;re finished, close the dialog box by selecting Close.</li>
</ol>
<h3 id="configure-auto-swap">Configure auto swap</h3>
<p>To configure auto swap:</p>
<ol>
<li><p>Go to your app&apos;s resource page and select the deployment slot you want to configure to auto swap. The setting is on the <strong>Configuration &gt; General settings</strong> page.</p>
</li>
<li><p>Set Auto swap enabled to On. Then select the desired target slot for Auto swap deployment slot, and select Save on the command bar.</p>
</li>
<li><p>Execute a code push to the source slot. Auto swap happens after a short time, and the update is reflected at your target slot&apos;s URL.</p>
</li>
</ol>
<p><br></p>
<h2 id="route-traffic-in-app-service">Route traffic in App Service</h2>
<p>By default, all client requests to the app&apos;s production URL (<code>http://&lt;app_name&gt;.azurewebsites.net</code>) are routed to the production slot. You can route a portion of the traffic to another slot. This feature is useful if you need user feedback for a new update, but you&apos;re not ready to release it to production.</p>
<p><img src="images/app_service_deploy_04.png" alt="alt text"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Scaling_app_service.html" class="navigation navigation-prev " aria-label="Previous page: 2.3. Scale apps in Azure App Service">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lab01.html" class="navigation navigation-next " aria-label="Next page: LAB 01 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"2.4. Explore Azure App Service deployment slots","level":"4.1.4","depth":2,"next":{"title":"LAB 01 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service","level":"5.1","depth":1,"path":"M1/02/lab01.md","ref":"M1/02/lab01.md","articles":[]},"previous":{"title":"2.3. Scale apps in Azure App Service","level":"4.1.3","depth":2,"path":"M1/02/Scaling_app_service.md","ref":"M1/02/Scaling_app_service.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"M1/02/Azure_app_service_deploy.md","mtime":"2022-12-19T22:08:56.000Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2022-12-20T18:49:37.311Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

