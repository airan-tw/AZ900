
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Run container images in Azure Container Instances · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lab01.html" />
    
    
    <link rel="prev" href="Manage_container.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    AZURE JOURNEY
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop Azure Compute Solutions</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Implement IaaS solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="Provision_vm.html">
            
                <a href="Provision_vm.html">
            
                    
                    Provision virtual machines in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="Create_arm.html">
            
                <a href="Create_arm.html">
            
                    
                    Create and deploy Azure Resource Manager templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="Manage_container.html">
            
                <a href="Manage_container.html">
            
                    
                    Manage container images in Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.4" data-path="Run_container.html">
            
                <a href="Run_container.html">
            
                    
                    Run container images in Azure Container Instances
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on LABS</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="lab01.html">
            
                <a href="lab01.html">
            
                    
                    Lab 01 - Create a VM by using the Azure Command-Line Interface (CLI)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="lab02.html">
            
                <a href="lab02.html">
            
                    
                    Lab 02 - Create a Docker container image and deploy it to Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="lab03.html">
            
                <a href="lab03.html">
            
                    
                    Lab 03 - Deploy an Azure container instance
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../02/">
            
                <a href="../02/">
            
                    
                    Create Azure App Service Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../02/Azure_app_service.html">
            
                <a href="../02/Azure_app_service.html">
            
                    
                    Explore Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../02/Config_app_service.html">
            
                <a href="../02/Config_app_service.html">
            
                    
                    Configure web app settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../02/Scaling_app_service.html">
            
                <a href="../02/Scaling_app_service.html">
            
                    
                    Scale apps in Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../02/Azure_app_service_deploy.html">
            
                <a href="../02/Azure_app_service_deploy.html">
            
                    
                    Explore Azure App Service deployment slots
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../02/lab01.html">
            
                <a href="../02/lab01.html">
            
                    
                    LAB 01 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../02/lab02.html">
            
                <a href="../02/lab02.html">
            
                    
                    LAB 02 - Build a front-end web application by using Azure Web Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../02/lab03.html">
            
                <a href="../02/lab03.html">
            
                    
                    LAB 03 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../03/">
            
                <a href="../03/">
            
                    
                    Implemente Azure functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../03/Azure_functions.html">
            
                <a href="../03/Azure_functions.html">
            
                    
                    Explore Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../03/Develop_azure_functions.html">
            
                <a href="../03/Develop_azure_functions.html">
            
                    
                    Develop Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../03/Implement_functions.html">
            
                <a href="../03/Implement_functions.html">
            
                    
                    Implement Durable Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../03/lab01.html">
            
                <a href="../03/lab01.html">
            
                    
                    LAB 01 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../03/lab02.html">
            
                <a href="../03/lab02.html">
            
                    
                    LAB 02 - Configure a local Azure Functions project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../03/lab03.html">
            
                <a href="../03/lab03.html">
            
                    
                    LAB 03 - Create a function that’s triggered by an HTTP request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../03/lab04.html">
            
                <a href="../03/lab04.html">
            
                    
                    LAB 04 - Create a function that triggers on a schedule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../03/lab05.html">
            
                <a href="../03/lab05.html">
            
                    
                    LAB 05 - Create a function that integrates with other services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../03/lab06.html">
            
                <a href="../03/lab06.html">
            
                    
                    LAB 06 - Deploy a local function project to an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../03/lab07.html">
            
                <a href="../03/lab07.html">
            
                    
                    LAB 07 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop for Azure storage</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../../M2/01/">
            
                <a href="../../M2/01/">
            
                    
                    Develop solutions that use Cosmos DB storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../../M2/02/">
            
                <a href="../../M2/02/">
            
                    
                    Develop solutions that use blob storage
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Run container images in Azure Container Instances</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="azure-container-instances">Azure Container Instances</h2>
<p>Azure Container Instances (ACI) is a great solution for any scenario that can operate in isolated containers, including simple applications, task automation, and build jobs. Here are some of the benefits:</p>
<ul>
<li><strong>Fast startup:</strong> ACI can start containers in Azure in seconds, without the need to provision and manage VMs</li>
<li><strong>Container access:</strong> ACI enables exposing your container groups directly to the internet with an IP address and a fully qualified domain name (FQDN)</li>
<li><strong>Hypervisor-level security:</strong> Isolate your application as completely as it would be in a VM</li>
<li><strong>Customer data:</strong> The ACI service stores the minimum customer data required to ensure your container groups are running as expected</li>
<li><strong>Custom sizes:</strong> ACI provides optimum utilization by allowing exact specifications of CPU cores and memory</li>
<li><strong>Persistent storage:</strong> Mount Azure Files shares directly to a container to retrieve and persist state</li>
<li><strong>Linux and Windows:</strong> Schedule both Windows and Linux containers using the same API.</li>
</ul>
<p>For scenarios where you need full container orchestration, including service discovery across multiple containers, automatic scaling, and coordinated application upgrades, we recommend Azure Kubernetes Service (AKS).</p>
<h3 id="container-groups">Container groups</h3>
<p>The top-level resource in Azure Container Instances is the container group. A container group is a collection of containers that get scheduled on the same host machine. The containers in a container group share a lifecycle, resources, local network, and storage volumes. It&apos;s similar in concept to a pod in Kubernetes.</p>
<p>The following diagram shows an example of a container group that includes multiple containers:</p>
<p><img src="images/run_container_01.png" alt="alt text"></p>
<p>This example container group:</p>
<ul>
<li>Is scheduled on a single host machine.</li>
<li>Is assigned a DNS name label.</li>
<li>Exposes a single public IP address, with one exposed port.</li>
<li>Consists of two containers. One container listens on port 80, while the other listens on port 5000.</li>
<li>Includes two Azure file shares as volume mounts, and each container mounts one of the shares locally.</li>
</ul>
<blockquote>
<p><strong>Note</strong>: Multi-container groups currently support only Linux containers. For Windows containers, Azure Container Instances only supports deployment of a single instance.</p>
</blockquote>
<h3 id="deployment">Deployment</h3>
<p>There are two common ways to deploy a multi-container group: use a Resource Manager template or a YAML file. A Resource Manager template is recommended when you need to deploy additional Azure service resources (for example, an Azure Files share) when you deploy the container instances. Due to the YAML format&apos;s more concise nature, a YAML file is recommended when your deployment includes only container instances.</p>
<h3 id="resource-allocation">Resource allocation</h3>
<p>Azure Container Instances allocates resources such as CPUs, memory, and optionally GPUs (preview) to a container group by adding the resource requests of the instances in the group. Taking CPU resources as an example, if you create a container group with two instances, each requesting 1 CPU, then the container group is allocated 2 CPUs.</p>
<h3 id="networking">Networking</h3>
<p>Container groups share an IP address and a port namespace on that IP address. To enable external clients to reach a container within the group, you must expose the port on the IP address and from the container. Because containers within the group share a port namespace, port mapping isn&apos;t supported. Containers within a group can reach each other via localhost on the ports that they have exposed, even if those ports aren&apos;t exposed externally on the group&apos;s IP address.</p>
<h3 id="storage">Storage</h3>
<p>You can specify external volumes to mount within a container group. You can map those volumes into specific paths within the individual containers in a group. Supported volumes include:</p>
<ul>
<li>Azure file share</li>
<li>Secret</li>
<li>Empty directory</li>
<li>Cloned git repo</li>
</ul>
<h3 id="common-scenarios">Common scenarios</h3>
<p>Multi-container groups are useful in cases where you want to divide a single functional task into a small number of container images. These images can then be delivered by different teams and have separate resource requirements.</p>
<h4 id="example-usage-could-include">Example usage could include:</h4>
<ul>
<li>A container serving a web application and a container pulling the latest content from source control.</li>
<li>An application container and a logging container. The logging container collects the logs and metrics output by the main application and writes them to long-term storage.</li>
<li>An application container and a monitoring container. The monitoring container periodically makes a request to the application to ensure that it&apos;s running and responding correctly, and raises an alert if it&apos;s not.</li>
<li>A front-end container and a back-end container. The front end might serve a web application, with the back end running a service to retrieve data.</li>
</ul>
<p><br></p>
<h2 id="exercise-deploy-a-container-instance-by-using-the-azure-cli">Exercise: Deploy a container instance by using the Azure CLI</h2>
<p><img src="images/run_container_02.png" alt="alt text"></p>
<p>In this exercise you&apos;ll learn how to perform the following actions:</p>
<ul>
<li>Create a resource group for the container</li>
<li>Create a container</li>
<li>Verify the container is running</li>
</ul>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>An Azure account with an active subscription. If you don&apos;t already have one, <a href="https://docs.google.com/document/d/1XEkiGWUC4_AzngZQLQnVt8yWCb3dft1HzXglUnJcJzM/edit#heading=h.c96x7dxoz6ej" target="_blank">follow this instructions</a>.</li>
</ul>
<h3 id="login-to-azure-and-start-the-cloud-shell">Login to Azure and start the Cloud Shell</h3>
<ol>
<li>Login to the <a href="https://portal.azure.com/" target="_blank">Azure Portal</a> and open the Cloud Shell.</li>
</ol>
<p><img src="images/provision_vm_05.png" alt="alt text"></p>
<ol>
<li>After the shell opens be sure to select the Bash environment.</li>
</ol>
<p><img src="images/provision_vm_06.png" alt="alt text"></p>
<ol>
<li>Create a new resource group with the name <strong>az204-aci-rg</strong> so that it will be easier to clean up these resources when you are finished with the module. </li>
</ol>
<pre><code class="lang-azurecli-interactive">az group create --name az204-aci-rg --location eastus
</code></pre>
<h3 id="create-a-container">Create a container</h3>
<p>You create a container by providing a name, a Docker image, and an Azure resource group to the az container create command. You will expose the container to the Internet by specifying a DNS name label.</p>
<ol>
<li>Create a DNS name to expose your container to the Internet. Your DNS name must be unique, run this command from Cloud Shell to create a variable that holds a unique name.</li>
</ol>
<pre><code class="lang-azurecli-interactive">DNS_NAME_LABEL=aci-example-$RANDOM
</code></pre>
<ol>
<li>Run the following <code>az container create</code> command to start a container instance. It will take a few minutes for the operation to complete.</li>
</ol>
<pre><code class="lang-azurecli-interactive">az container create --resource-group az204-aci-rg \
    --name mycontainer \
    --image mcr.microsoft.com/azuredocs/aci-helloworld \
    --ports 80 \
    --dns-name-label $DNS_NAME_LABEL --location eastus \
</code></pre>
<p>In the commands above, <code>$DNS_NAME_LABEL</code> specifies your DNS name. The image name, <code>mcr.microsoft.com/azuredocs/aci-helloworld</code>, refers to a Docker image that runs a basic Node.js web application.</p>
<h3 id="verify-the-container-is-running">Verify the container is running</h3>
<ol>
<li>When the az container create command completes, run az container show to check its status.</li>
</ol>
<pre><code class="lang-azurecli-interactive">az container show --resource-group az204-aci-rg \
    --name mycontainer \
    --query &quot;{FQDN:ipAddress.fqdn,ProvisioningState:provisioningState}&quot; \
    --out table \
</code></pre>
<p>You see your container&apos;s fully qualified domain name (FQDN) and its provisioning state. Here&apos;s an example.</p>
<pre><code class="lang-azurecli-interactive">FQDN                                    ProvisioningState
--------------------------------------  -------------------
aci-wt.eastus.azurecontainer.io         Succeeded
</code></pre>
<blockquote>
<p><strong>Note</strong>: If your container is in the <strong>Creating</strong> state, wait a few moments and run the command again until you see the <strong>Succeeded</strong> state.</p>
</blockquote>
<ol>
<li>From a browser, navigate to your container&apos;s FQDN to see it running. You may get a warning that the site isn&apos;t safe.</li>
</ol>
<h3 id="clean-up-resources">Clean up resources</h3>
<p>When no longer needed, you can use the <code>az group delete</code> command to remove the resource group, the container registry, and the container images stored there.</p>
<pre><code class="lang-azurecli-interactive">az group delete --name az204-aci-rg --no-wait
</code></pre>
<blockquote>
<p><strong>Note</strong>: This operation takes on average 5 - 10 minutes</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Manage_container.html" class="navigation navigation-prev " aria-label="Previous page: Manage container images in Azure Container Registry">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lab01.html" class="navigation navigation-next " aria-label="Next page: Lab 01 - Create a VM by using the Azure Command-Line Interface (CLI)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Run container images in Azure Container Instances","level":"2.1.4","depth":2,"next":{"title":"Lab 01 - Create a VM by using the Azure Command-Line Interface (CLI)","level":"3.1","depth":1,"path":"M1/01/lab01.md","ref":"M1/01/lab01.md","articles":[]},"previous":{"title":"Manage container images in Azure Container Registry","level":"2.1.3","depth":2,"path":"M1/01/Manage_container.md","ref":"M1/01/Manage_container.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"M1/01/Run_container.md","mtime":"2022-12-19T22:08:56.000Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2022-12-20T16:54:16.340Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

