
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>LAB 3 - Configure a .NET web application · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lab04.html" />
    
    
    <link rel="prev" href="lab02.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    AZURE JOURNEY
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop Azure Compute Solutions</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../M1/01/">
            
                <a href="../../M1/01/">
            
                    
                    1. Implement IaaS solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../M1/01/Provision_vm.html">
            
                <a href="../../M1/01/Provision_vm.html">
            
                    
                    1.1. Provision virtual machines in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../M1/01/Create_arm.html">
            
                <a href="../../M1/01/Create_arm.html">
            
                    
                    1.2. Create and deploy Azure Resource Manager templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../M1/01/Manage_container.html">
            
                <a href="../../M1/01/Manage_container.html">
            
                    
                    1.3. Manage container images in Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../M1/01/Run_container.html">
            
                <a href="../../M1/01/Run_container.html">
            
                    
                    1.4 Run container images in Azure Container Instances
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on LABS</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../M1/01/lab01.html">
            
                <a href="../../M1/01/lab01.html">
            
                    
                    Lab 1 - Create a VM by using the Azure Command-Line Interface (CLI)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../M1/01/lab02.html">
            
                <a href="../../M1/01/lab02.html">
            
                    
                    Lab 2 - Create a Docker container image and deploy it to Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../M1/01/lab03.html">
            
                <a href="../../M1/01/lab03.html">
            
                    
                    Lab 3 - Deploy an Azure container instance
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../M1/02/">
            
                <a href="../../M1/02/">
            
                    
                    2. Create Azure App Service Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../M1/02/Azure_app_service.html">
            
                <a href="../../M1/02/Azure_app_service.html">
            
                    
                    2.1. Explore Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../M1/02/Config_app_service.html">
            
                <a href="../../M1/02/Config_app_service.html">
            
                    
                    2.2. Configure web app settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../M1/02/Scaling_app_service.html">
            
                <a href="../../M1/02/Scaling_app_service.html">
            
                    
                    2.3. Scale apps in Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../../M1/02/Azure_app_service_deploy.html">
            
                <a href="../../M1/02/Azure_app_service_deploy.html">
            
                    
                    2.4. Explore Azure App Service deployment slots
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../M1/02/lab01.html">
            
                <a href="../../M1/02/lab01.html">
            
                    
                    LAB 1 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../M1/02/lab02.html">
            
                <a href="../../M1/02/lab02.html">
            
                    
                    LAB 2 - Build a front-end web application by using Azure Web Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../../M1/02/lab03.html">
            
                <a href="../../M1/02/lab03.html">
            
                    
                    LAB 3 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../M1/03/">
            
                <a href="../../M1/03/">
            
                    
                    3. Implemente Azure functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../M1/03/Azure_functions.html">
            
                <a href="../../M1/03/Azure_functions.html">
            
                    
                    3.1. Explore Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../M1/03/Develop_azure_functions.html">
            
                <a href="../../M1/03/Develop_azure_functions.html">
            
                    
                    3.2. Develop Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../M1/03/Implement_functions.html">
            
                <a href="../../M1/03/Implement_functions.html">
            
                    
                    3.3. Implement Durable Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../M1/03/lab01.html">
            
                <a href="../../M1/03/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../M1/03/lab02.html">
            
                <a href="../../M1/03/lab02.html">
            
                    
                    LAB 2 - Configure a local Azure Functions project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../M1/03/lab03.html">
            
                <a href="../../M1/03/lab03.html">
            
                    
                    LAB 3 - Create a function that’s triggered by an HTTP request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../../M1/03/lab04.html">
            
                <a href="../../M1/03/lab04.html">
            
                    
                    LAB 4 - Create a function that triggers on a schedule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../../M1/03/lab05.html">
            
                <a href="../../M1/03/lab05.html">
            
                    
                    LAB 5 - Create a function that integrates with other services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../../M1/03/lab06.html">
            
                <a href="../../M1/03/lab06.html">
            
                    
                    LAB 6 - Deploy a local function project to an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../../M1/03/lab07.html">
            
                <a href="../../M1/03/lab07.html">
            
                    
                    LAB 7 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop for Azure storage</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="./">
            
                <a href="./">
            
                    
                    4. Develop solutions that use Cosmos DB storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="Cosmosdb_overview.html">
            
                <a href="Cosmosdb_overview.html">
            
                    
                    4.1. Explore Azure Cosmos DB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="Cosmosdb_structure.html">
            
                <a href="Cosmosdb_structure.html">
            
                    
                    4.2. Implement partitioning in Azure Cosmos DB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="Working_cosmosdb.html">
            
                <a href="Working_cosmosdb.html">
            
                    
                    4.3. Work with Azure Cosmos DB
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="lab01.html">
            
                <a href="lab01.html">
            
                    
                    LAB 1 - Creating data store resources in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="lab02.html">
            
                <a href="lab02.html">
            
                    
                    LAB 2 - Review and upload data
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="9.3" data-path="lab03.html">
            
                <a href="lab03.html">
            
                    
                    LAB 3 - Configure a .NET web application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="lab04.html">
            
                <a href="lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../02/">
            
                <a href="../02/">
            
                    
                    5. Develop solutions that use blob storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1.1" data-path="../02/Blob_storage_concepts.html">
            
                <a href="../02/Blob_storage_concepts.html">
            
                    
                    5.1. Explore Azure Blob storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.2" data-path="../02/Blob_storage_lifecycle.html">
            
                <a href="../02/Blob_storage_lifecycle.html">
            
                    
                    5.2. Manage the Azure Blob storage lifecycle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.3" data-path="../02/Working_blob_storage.html">
            
                <a href="../02/Working_blob_storage.html">
            
                    
                    5.3. Work with Azure Blob storage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../02/lab01.html">
            
                <a href="../02/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="../02/lab02.html">
            
                <a href="../02/lab02.html">
            
                    
                    LAB 2 - Upload a blob into a container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="../02/lab03.html">
            
                <a href="../02/lab03.html">
            
                    
                    LAB 3 - Access containers by using the .NET SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.4" data-path="../02/lab04.html">
            
                <a href="../02/lab04.html">
            
                    
                    LAB 4 - Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.5" data-path="../02/lab05.html">
            
                <a href="../02/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Implement Azure security</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../../M3/01/">
            
                <a href="../../M3/01/">
            
                    
                    6. Implement use authentication and authorization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="12.1.1" data-path="../../M3/01/Implement_auth.html">
            
                <a href="../../M3/01/Implement_auth.html">
            
                    
                    6.1. Explore the Microsoft identity platform
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.2" data-path="../../M3/01/Microsoft_id_platform.html">
            
                <a href="../../M3/01/Microsoft_id_platform.html">
            
                    
                    6.2. Implement authentication by using the Microsoft Authentication Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.3" data-path="../../M3/01/Implement_shared_access.html">
            
                <a href="../../M3/01/Implement_shared_access.html">
            
                    
                    6.3. Implement shared access signatures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.4" data-path="../../M3/01/Microsoft_graph.html">
            
                <a href="../../M3/01/Microsoft_graph.html">
            
                    
                    6.4. Explore Microsoft Graph
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="../../M3/01/lab01.html">
            
                <a href="../../M3/01/lab01.html">
            
                    
                    LAB 1 - Configure a single-tenant Azure AD environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="../../M3/01/lab02.html">
            
                <a href="../../M3/01/lab02.html">
            
                    
                    LAB 2 - Create a single-tenant ASP.NET web app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="../../M3/01/lab03.html">
            
                <a href="../../M3/01/lab03.html">
            
                    
                    LAB 3 - Clean up your lab environment
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="../../M3/02/">
            
                <a href="../../M3/02/">
            
                    
                    7. Implement secure cloud solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="14.1.1" data-path="../../M3/02/Implement_key_vault.html">
            
                <a href="../../M3/02/Implement_key_vault.html">
            
                    
                    7.1. Implement Azure Key Vault
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.1.2" data-path="../../M3/02/Implement_identities.html">
            
                <a href="../../M3/02/Implement_identities.html">
            
                    
                    7.2. Implement managed identities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.1.3" data-path="../../M3/02/Implement_app_config.html">
            
                <a href="../../M3/02/Implement_app_config.html">
            
                    
                    7.3. Implement Azure App Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="15.1" data-path="../../M3/02/lab01.html">
            
                <a href="../../M3/02/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="../../M3/02/lab02.html">
            
                <a href="../../M3/02/lab02.html">
            
                    
                    LAB 2 - Configure secrets and identities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.3" data-path="../../M3/02/lab03.html">
            
                <a href="../../M3/02/lab03.html">
            
                    
                    LAB 3 - Build an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.4" data-path="../../M3/02/lab04.html">
            
                <a href="../../M3/02/lab04.html">
            
                    
                    LAB 4 - Access Azure Blob Storage data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.5" data-path="../../M3/02/lab05.html">
            
                <a href="../../M3/02/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Monitor, troubleshoot, and optimize Azure solutions</li>
        
        
    
        <li class="chapter " data-level="16.1" data-path="../../M4/01/">
            
                <a href="../../M4/01/">
            
                    
                    8. Integrate caching and content delivery within solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1.1" data-path="../../M4/01/Develop_cache_redis.html">
            
                <a href="../../M4/01/Develop_cache_redis.html">
            
                    
                    8.1. Develop for Azure Cache for Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.1.2" data-path="../../M4/01/Develop_storage_cdn.html">
            
                <a href="../../M4/01/Develop_storage_cdn.html">
            
                    
                    8.2. Develop for storage on CDNs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="17.1" data-path="../../M4/01/lab01.html">
            
                <a href="../../M4/01/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.2" data-path="../../M4/01/lab02.html">
            
                <a href="../../M4/01/lab02.html">
            
                    
                    LAB 2 - Configure Content Delivery Network and endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.3" data-path="../../M4/01/lab03.html">
            
                <a href="../../M4/01/lab03.html">
            
                    
                    LAB 3 - Upload and configure static web content
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.4" data-path="../../M4/01/lab04.html">
            
                <a href="../../M4/01/lab04.html">
            
                    
                    LAB 4 - Use Content Delivery Network endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.5" data-path="../../M4/01/lab05.html">
            
                <a href="../../M4/01/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="18.1" data-path="../../M4/02/">
            
                <a href="../../M4/02/">
            
                    
                    9. Instrument solutions to support monitoring and logging
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="18.1.1" data-path="../../M4/02/Monitor_app.html">
            
                <a href="../../M4/02/Monitor_app.html">
            
                    
                    9.1. Monitor app performance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="19.1" data-path="../../M4/02/lab01.html">
            
                <a href="../../M4/02/lab01.html">
            
                    
                    LAB 1 - Create and configure Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.2" data-path="../../M4/02/lab02.html">
            
                <a href="../../M4/02/lab02.html">
            
                    
                    LAB 2 - Monitor a local web API by using Application Insights
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.3" data-path="../../M4/02/lab03.html">
            
                <a href="../../M4/02/lab03.html">
            
                    
                    LAB 3 - Monitor a web API using Application Insights
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.4" data-path="../../M4/02/lab04.html">
            
                <a href="../../M4/02/lab04.html">
            
                    
                    LAB 4 - Application Insights logging with .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.5" data-path="../../M4/02/lab05.html">
            
                <a href="../../M4/02/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Connect to and consume Azure services and third-party services</li>
        
        
    
        <li class="chapter " data-level="20.1" data-path="../../M5/02/">
            
                <a href="../../M5/02/">
            
                    
                    10. Implement API Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="20.1.1" data-path="../../M5/02/API_Management.html">
            
                <a href="../../M5/02/API_Management.html">
            
                    
                    10.1. Explore API Management
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="21.1" data-path="../../M5/02/lab01.html">
            
                <a href="../../M5/02/lab01.html">
            
                    
                    LAB 1 - Create an Azure App Service resource by using a Docker container image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.2" data-path="../../M5/02/lab02.html">
            
                <a href="../../M5/02/lab02.html">
            
                    
                    LAB 2 - Build an API proxy tier by using Azure API Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.3" data-path="../../M5/02/lab03.html">
            
                <a href="../../M5/02/lab03.html">
            
                    
                    LAB 3 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="22.1" data-path="../../M5/03/">
            
                <a href="../../M5/03/">
            
                    
                    11. Develop event-based solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="22.1.1" data-path="../../M5/03/Event_grid.html">
            
                <a href="../../M5/03/Event_grid.html">
            
                    
                    11.1. Explore Azure Event Grid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.1.2" data-path="../../M5/03/Event_hubs.html">
            
                <a href="../../M5/03/Event_hubs.html">
            
                    
                    11.2. Explore Azure Event Hubs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="23.1" data-path="../../M5/03/lab01.html">
            
                <a href="../../M5/03/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.2" data-path="../../M5/03/lab02.html">
            
                <a href="../../M5/03/lab02.html">
            
                    
                    LAB 2 - Create an Event Grid subscription
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.3" data-path="../../M5/03/lab03.html">
            
                <a href="../../M5/03/lab03.html">
            
                    
                    LAB 3 - Publish Event Grid events from .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.4" data-path="../../M5/03/lab04.html">
            
                <a href="../../M5/03/lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="24.1" data-path="../../M5/04/">
            
                <a href="../../M5/04/">
            
                    
                    12. Develop message-based solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="24.1.1" data-path="../../M5/04/Message_queues.html">
            
                <a href="../../M5/04/Message_queues.html">
            
                    
                    12.1. Discover Azure message queues
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="25.1" data-path="../../M5/04/lab01.html">
            
                <a href="../../M5/04/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.2" data-path="../../M5/04/lab0.md">
            
                <span>
            
                    
                    LAB 2 - Create a .NET Core project to publish messages to a Service Bus queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.3" data-path="../../M5/04/lab03.html">
            
                <a href="../../M5/04/lab03.html">
            
                    
                    LAB 3 - Create a .NET Core project to read messages from a Service Bus queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.4" data-path="../../M5/04/lab04.html">
            
                <a href="../../M5/04/lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >LAB 3 - Configure a .NET web application</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="lab-3-configure-a-net-web-application">Lab 3: Configure a .NET web application</h2>
<h3 id="task-1-update-references-to-data-stores-and-build-the-web-application">Task 1: Update references to data stores and build the web application</h3>
<ol>
<li><p>In the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, expand the <strong>AdventureWorks.Web</strong> project.</p>
</li>
<li><p>Open the <strong>appsettings.json</strong> file.</p>
</li>
<li><p>In the JSON object on line 3, find the <strong>ConnectionStrings.AdventureWorksCosmosContext</strong> path. Note that the current value is empty:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;ConnectionStrings&quot;</span>: {
    <span class="hljs-string">&quot;AdventureWorksCosmosContext&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
},
</code></pre>
</li>
<li><p>Update the value of the <strong>AdventureWorksCosmosContext</strong> property by setting its value to the <strong>PRIMARY CONNECTION STRING</strong> of the Azure Cosmos DB account that you recorded earlier in this lab.</p>
</li>
<li><p>In the JSON object on line 6, find the <strong>Settings.BlobContainerUrl</strong> path. Note that the current value is empty:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;Settings&quot;</span>: {
    <span class="hljs-string">&quot;BlobContainerUrl&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
    ...
}
</code></pre>
</li>
<li><p>Update the <strong>BlobContainerUrl</strong> property by setting its value to the <strong>URL</strong> property of the Azure Storage blob container named <strong>images</strong> that you recorded earlier in this lab.</p>
</li>
<li><p>Save the <strong>appsettings.json</strong> file and close it.</p>
<blockquote>
<p><strong>Note</strong>: Select <strong>Overwrite</strong> if you received a prompt that the file is read-only.</p>
</blockquote>
</li>
<li><p>In the <strong>Visual Studio Code</strong> window, select <strong>AdventureWorks.Context</strong>, activate the shortcut menu, and then select <strong>Open in Integrated Terminal</strong>.</p>
<blockquote>
<p><strong>Note</strong>:Before you perform the next step, open Windows Explorer and remove the Read-only attribute from the file <strong>$HOME\training-az204\Labs\04\Starter\AdventureWorks\AdventureWorks.Context\AdventureWorks.Context.csproj</strong></p>
</blockquote>
</li>
<li><p>From the terminal prompt, verify that the current directory is set to <strong>AdventureWorks.Context</strong> (or change it to that if it&apos;s not), and then run the following command to import <strong>Microsoft.Azure.Cosmos</strong> from NuGet:</p>
<pre><code>dotnet add package Microsoft.Azure.Cosmos --version 3.28.0
</code></pre></li>
<li><p>From the terminal prompt, run the following command to build the .NET web application:</p>
<pre><code>dotnet build
</code></pre></li>
<li><p>Observe the results of the build printed in the terminal. The build should complete successfully with no errors or warning messages.</p>
</li>
</ol>
<h3 id="task-2-configure-connectivity-to-azure-cosmos-db">Task 2: Configure connectivity to Azure Cosmos DB</h3>
<ol>
<li><p>In the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, expand the <strong>AdventureWorks.Context</strong> project.</p>
</li>
<li><p>From the shortcut menu of the <strong>AdventureWorks.Context</strong> folder node, select <strong>New File</strong>.</p>
</li>
<li><p>At the new file prompt, enter <strong>AdventureWorksCosmosContext.cs</strong>.</p>
</li>
<li><p>From the code editor tab for the <strong>AdventureWorksCosmosContext.cs</strong> file, add the following lines of code to import the <strong>AdventureWorks.Models</strong> namespace from the referenced <strong>AdventureWorks.Models</strong> project:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> AdventureWorks.Models;
</code></pre>
</li>
<li><p>Add the following lines of code to import the <strong>Microsoft.Azure.Cosmos</strong> and <strong>Microsoft.Azure.Cosmos.Linq</strong> namespaces from the <strong>Microsoft.Azure.Cosmos</strong> package imported from NuGet:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> Microsoft.Azure.Cosmos;
<span class="hljs-keyword">using</span> Microsoft.Azure.Cosmos.Linq;
</code></pre>
</li>
<li><p>Add the following lines of code to include <strong>using</strong> directives for the built-in namespaces that this file will use:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> System.Linq;
<span class="hljs-keyword">using</span> System.Threading.Tasks;
</code></pre>
</li>
<li><p>Enter the following code to add an <strong>AdventureWorks.Context</strong> namespace block:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">namespace</span> <span class="hljs-title">AdventureWorks.Context</span>
{
}
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorks.Context</strong> namespace, enter the following code to create a new <strong>AdventureWorksCosmosContext</strong> class:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AdventureWorksCosmosContext</span>
{
}
</code></pre>
</li>
<li><p>Update the declaration of the <strong>AdventureWorksCosmosContext</strong> class by adding a specification indicating that this class will implement the <strong>IAdventureWorksProductContext</strong> interface:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AdventureWorksCosmosContext</span> : <span class="hljs-title">IAdventureWorksProductContext</span>
{
}
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorksCosmosContext</strong> class, enter the following code to create a new read-only <em>Container</em> variable named <strong>_container</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> Container _container;
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorksCosmosContext</strong> class, add a new constructor with the following signature:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AdventureWorksCosmosContext</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> connectionString, <span class="hljs-built_in">string</span> database = <span class="hljs-string">&quot;Retail&quot;</span>, <span class="hljs-built_in">string</span> container = <span class="hljs-string">&quot;Online&quot;</span></span>)</span>
{
}
</code></pre>
</li>
<li><p>Within the constructor, add the following block of code to create a new instance of the <strong>CosmosClient</strong> class, and then obtain both a <strong>Database</strong> and <strong>Container</strong> instance from the client:</p>
<pre><code class="lang-csharp">_container = <span class="hljs-keyword">new</span> CosmosClient(connectionString)
    .GetDatabase(database)
    .GetContainer(container);
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorksCosmosContext</strong> class, add a new <strong>FindModelAsync</strong> method with the following signature:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;Model&gt; <span class="hljs-title">FindModelAsync</span>(<span class="hljs-params">Guid id</span>)</span>
{
}
</code></pre>
</li>
<li><p>Within the <strong>FindModelAsync</strong> method, add the following blocks of code to create a LINQ query, transform it into an iterator, iterate over the result set, and then return the single item in the result set:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">var</span> iterator = _container.GetItemLinqQueryable&lt;Model&gt;()
    .Where(m =&gt; m.id == id)
    .ToFeedIterator&lt;Model&gt;();
List&lt;Model&gt; matches = <span class="hljs-keyword">new</span> List&lt;Model&gt;();
<span class="hljs-keyword">while</span> (iterator.HasMoreResults)
{
    <span class="hljs-keyword">var</span> next = <span class="hljs-keyword">await</span> iterator.ReadNextAsync();
    matches.AddRange(next);
}
<span class="hljs-keyword">return</span> matches.SingleOrDefault();
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorksCosmosContext</strong> class, add a new <strong>GetModelsAsync</strong> method with the following signature:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;List&lt;Model&gt;&gt; GetModelsAsync()
{
}
</code></pre>
</li>
<li><p>Within the <strong>GetModelsAsync</strong> method, add the following blocks of code to run an SQL query, get the query result iterator, iterate over the result set, and then return the union of all results:</p>
<pre><code class="lang-csharp"><span class="hljs-built_in">string</span> query = <span class="hljs-string">$@&quot;SELECT * FROM items&quot;</span>;
<span class="hljs-keyword">var</span> iterator = _container.GetItemQueryIterator&lt;Model&gt;(query);
List&lt;Model&gt; matches = <span class="hljs-keyword">new</span> List&lt;Model&gt;();
<span class="hljs-keyword">while</span> (iterator.HasMoreResults)
{
    <span class="hljs-keyword">var</span> next = <span class="hljs-keyword">await</span> iterator.ReadNextAsync();
    matches.AddRange(next);
}
<span class="hljs-keyword">return</span> matches;
</code></pre>
</li>
<li><p>Within the <strong>AdventureWorksCosmosContext</strong> class, add a new <strong>FindProductAsync</strong> method with the following signature:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;Product&gt; <span class="hljs-title">FindProductAsync</span>(<span class="hljs-params">Guid id</span>)</span>
{
}
</code></pre>
</li>
<li><p>Within the <strong>FindProductAsync</strong> method, add the following blocks of code to run an SQL query, get the query result iterator, iterate over the result set, and then return the single item in the result set:</p>
<pre><code class="lang-csharp"><span class="hljs-built_in">string</span> query = <span class="hljs-string">$@&quot;SELECT VALUE products
                    FROM models
                    JOIN products in models.Products
                    WHERE products.id = &apos;<span class="hljs-subst">{id}</span>&apos;&quot;</span>;
<span class="hljs-keyword">var</span> iterator = _container.GetItemQueryIterator&lt;Product&gt;(query);
List&lt;Product&gt; matches = <span class="hljs-keyword">new</span> List&lt;Product&gt;();
<span class="hljs-keyword">while</span> (iterator.HasMoreResults)
{
    <span class="hljs-keyword">var</span> next = <span class="hljs-keyword">await</span> iterator.ReadNextAsync();
    matches.AddRange(next);
}
<span class="hljs-keyword">return</span> matches.SingleOrDefault();
</code></pre>
</li>
<li><p>Save and close the <strong>AdventureWorksCosmosContext.cs</strong> file.</p>
</li>
<li><p>From the terminal prompt, with the current directory set to <strong>AdventureWorks.Context</strong>, run the following command to build the .NET web application:</p>
<pre><code>dotnet build
</code></pre><blockquote>
<p><strong>Note</strong>: If there are any build errors, review the <strong>AdventureWorksCosmosContext.cs</strong> file in the <strong>$HOME\training-az204\Labs\04\Solution\AdventureWorks\AdventureWorks.Context</strong> folder.</p>
</blockquote>
</li>
</ol>
<h3 id="task-3-review-the-net-application-startup-logic">Task 3: Review the .NET application startup logic</h3>
<ol>
<li><p>In the <strong>Explorer</strong> pane of the <strong>Visual Studio Code</strong> window, expand the <strong>AdventureWorks.Web</strong> project.</p>
</li>
<li><p>Open the <strong>Startup.cs</strong> file.</p>
</li>
<li><p>In the <strong>Startup</strong> class, note the existing <strong>ConfigureProductService</strong> method:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureProductService</span>(<span class="hljs-params">IServiceCollection services</span>)</span>
{
    services.AddScoped&lt;IAdventureWorksProductContext, AdventureWorksCosmosContext&gt;(provider =&gt;
        <span class="hljs-keyword">new</span> AdventureWorksCosmosContext(
            _configuration.GetConnectionString(<span class="hljs-keyword">nameof</span>(AdventureWorksCosmosContext))
        )
    );
}
</code></pre>
<blockquote>
<p><strong>Note</strong>: The product service uses Cosmos DB as its database.</p>
</blockquote>
</li>
<li><p>Close the <strong>Startup.cs</strong> file without making any modifications.</p>
</li>
</ol>
<h3 id="task-4-validate-that-the-net-application-successfully-connects-to-data-stores">Task 4: Validate that the .NET application successfully connects to data stores</h3>
<ol>
<li><p>In Visual Studio Code, from the terminal prompt, run the following command to switch your terminal context to the <strong>AdventureWorks.Web</strong> folder:</p>
<pre><code>cd ..\AdventureWorks.Web\
</code></pre></li>
<li><p>From the terminal prompt, run the following command to run the ASP.NET web application:</p>
<pre><code>dotnet run
</code></pre><blockquote>
<p><strong>Note</strong>: The <strong>dotnet run</strong> command will automatically build any changes to the project and then start the web application without a debugger attached. The command will output the URL of the running application and any assigned ports.</p>
</blockquote>
</li>
<li><p>On the taskbar, select the <strong>Microsoft Edge</strong> icon.</p>
</li>
<li><p>In the open browser window, browse to the currently running web application (<a href="http://localhost:5000" target="_blank">http://localhost:5000</a>).</p>
</li>
<li><p>In the web application, observe the list of models displayed from the front page.</p>
</li>
<li><p>Find the <strong>Touring-1000</strong> model, and then select <strong>View Details</strong>.</p>
</li>
<li><p>On the <strong>Touring-1000</strong> product detail page, review the listing of options.</p>
</li>
<li><p>Close the browser window displaying your web application.</p>
</li>
<li><p>Switch to the <strong>Visual Studio Code</strong> window, and then select <strong>Kill Terminal</strong> (the <strong>Recycle Bin</strong> icon) to close the currently open terminal and any associated processes.</p>
</li>
</ol>
<h2 id="review">Review</h2>
<p>In this exercise, you wrote C# code to query an Azure Cosmos DB collection by using the .NET SDK.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="lab02.html" class="navigation navigation-prev " aria-label="Previous page: LAB 2 - Review and upload data">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lab04.html" class="navigation navigation-next " aria-label="Next page: LAB 4 - Clean up your subscription">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"LAB 3 - Configure a .NET web application","level":"9.3","depth":1,"next":{"title":"LAB 4 - Clean up your subscription","level":"9.4","depth":1,"path":"M2/01/lab04.md","ref":"M2/01/lab04.md","articles":[]},"previous":{"title":"LAB 2 - Review and upload data","level":"9.2","depth":1,"path":"M2/01/lab02.md","ref":"M2/01/lab02.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"M2/01/lab03.md","mtime":"2022-12-23T18:23:23.328Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2022-12-23T21:00:22.927Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

