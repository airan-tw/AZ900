
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>LAB 4 - Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lab05.html" />
    
    
    <link rel="prev" href="lab03.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    AZURE JOURNEY
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop Azure Compute Solutions</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../M1/01/">
            
                <a href="../../M1/01/">
            
                    
                    1. Implement IaaS solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../M1/01/Provision_vm.html">
            
                <a href="../../M1/01/Provision_vm.html">
            
                    
                    1.1. Provision virtual machines in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../M1/01/Create_arm.html">
            
                <a href="../../M1/01/Create_arm.html">
            
                    
                    1.2. Create and deploy Azure Resource Manager templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../M1/01/Manage_container.html">
            
                <a href="../../M1/01/Manage_container.html">
            
                    
                    1.3. Manage container images in Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../M1/01/Run_container.html">
            
                <a href="../../M1/01/Run_container.html">
            
                    
                    1.4 Run container images in Azure Container Instances
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on LABS</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../M1/01/lab01.html">
            
                <a href="../../M1/01/lab01.html">
            
                    
                    Lab 1 - Create a VM by using the Azure Command-Line Interface (CLI)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../M1/01/lab02.html">
            
                <a href="../../M1/01/lab02.html">
            
                    
                    Lab 2 - Create a Docker container image and deploy it to Azure Container Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../M1/01/lab03.html">
            
                <a href="../../M1/01/lab03.html">
            
                    
                    Lab 3 - Deploy an Azure container instance
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../M1/02/">
            
                <a href="../../M1/02/">
            
                    
                    2. Create Azure App Service Web Apps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../M1/02/Azure_app_service.html">
            
                <a href="../../M1/02/Azure_app_service.html">
            
                    
                    2.1. Explore Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../M1/02/Config_app_service.html">
            
                <a href="../../M1/02/Config_app_service.html">
            
                    
                    2.2. Configure web app settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../M1/02/Scaling_app_service.html">
            
                <a href="../../M1/02/Scaling_app_service.html">
            
                    
                    2.3. Scale apps in Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../../M1/02/Azure_app_service_deploy.html">
            
                <a href="../../M1/02/Azure_app_service_deploy.html">
            
                    
                    2.4. Explore Azure App Service deployment slots
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../M1/02/lab01.html">
            
                <a href="../../M1/02/lab01.html">
            
                    
                    LAB 1 - Build a backend API by using Azure Storage and the Web Apps feature of Azure App Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../M1/02/lab02.html">
            
                <a href="../../M1/02/lab02.html">
            
                    
                    LAB 2 - Build a front-end web application by using Azure Web Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../../M1/02/lab03.html">
            
                <a href="../../M1/02/lab03.html">
            
                    
                    LAB 3 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../M1/03/">
            
                <a href="../../M1/03/">
            
                    
                    3. Implemente Azure functions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../M1/03/Azure_functions.html">
            
                <a href="../../M1/03/Azure_functions.html">
            
                    
                    3.1. Explore Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../../M1/03/Develop_azure_functions.html">
            
                <a href="../../M1/03/Develop_azure_functions.html">
            
                    
                    3.2. Develop Azure Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../../M1/03/Implement_functions.html">
            
                <a href="../../M1/03/Implement_functions.html">
            
                    
                    3.3. Implement Durable Functions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../../M1/03/lab01.html">
            
                <a href="../../M1/03/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../../M1/03/lab02.html">
            
                <a href="../../M1/03/lab02.html">
            
                    
                    LAB 2 - Configure a local Azure Functions project
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../../M1/03/lab03.html">
            
                <a href="../../M1/03/lab03.html">
            
                    
                    LAB 3 - Create a function that’s triggered by an HTTP request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.4" data-path="../../M1/03/lab04.html">
            
                <a href="../../M1/03/lab04.html">
            
                    
                    LAB 4 - Create a function that triggers on a schedule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.5" data-path="../../M1/03/lab05.html">
            
                <a href="../../M1/03/lab05.html">
            
                    
                    LAB 5 - Create a function that integrates with other services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.6" data-path="../../M1/03/lab06.html">
            
                <a href="../../M1/03/lab06.html">
            
                    
                    LAB 6 - Deploy a local function project to an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.7" data-path="../../M1/03/lab07.html">
            
                <a href="../../M1/03/lab07.html">
            
                    
                    LAB 7 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Develop for Azure storage</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../01/">
            
                <a href="../01/">
            
                    
                    4. Develop solutions that use Cosmos DB storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="../01/Cosmosdb_overview.html">
            
                <a href="../01/Cosmosdb_overview.html">
            
                    
                    4.1. Explore Azure Cosmos DB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="../01/Cosmosdb_structure.html">
            
                <a href="../01/Cosmosdb_structure.html">
            
                    
                    4.2. Implement partitioning in Azure Cosmos DB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="../01/Working_cosmosdb.html">
            
                <a href="../01/Working_cosmosdb.html">
            
                    
                    4.3. Work with Azure Cosmos DB
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../01/lab01.html">
            
                <a href="../01/lab01.html">
            
                    
                    LAB 1 - Creating data store resources in Azure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../01/lab02.html">
            
                <a href="../01/lab02.html">
            
                    
                    LAB 2 - Review and upload data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="../01/lab03.html">
            
                <a href="../01/lab03.html">
            
                    
                    LAB 3 - Configure a .NET web application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="../01/lab04.html">
            
                <a href="../01/lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="./">
            
                <a href="./">
            
                    
                    5. Develop solutions that use blob storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1.1" data-path="Blob_storage_concepts.html">
            
                <a href="Blob_storage_concepts.html">
            
                    
                    5.1. Explore Azure Blob storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.2" data-path="Blob_storage_lifecycle.html">
            
                <a href="Blob_storage_lifecycle.html">
            
                    
                    5.2. Manage the Azure Blob storage lifecycle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.1.3" data-path="Working_blob_storage.html">
            
                <a href="Working_blob_storage.html">
            
                    
                    5.3. Work with Azure Blob storage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="lab01.html">
            
                <a href="lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="lab02.html">
            
                <a href="lab02.html">
            
                    
                    LAB 2 - Upload a blob into a container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="lab03.html">
            
                <a href="lab03.html">
            
                    
                    LAB 3 - Access containers by using the .NET SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="11.4" data-path="lab04.html">
            
                <a href="lab04.html">
            
                    
                    LAB 4 - Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="11.5" data-path="lab05.html">
            
                <a href="lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Implement Azure security</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../../M3/01/">
            
                <a href="../../M3/01/">
            
                    
                    6. Implement use authentication and authorization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="12.1.1" data-path="../../M3/01/Implement_auth.html">
            
                <a href="../../M3/01/Implement_auth.html">
            
                    
                    6.1. Explore the Microsoft identity platform
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.2" data-path="../../M3/01/Microsoft_id_platform.html">
            
                <a href="../../M3/01/Microsoft_id_platform.html">
            
                    
                    6.2. Implement authentication by using the Microsoft Authentication Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.3" data-path="../../M3/01/Implement_shared_access.html">
            
                <a href="../../M3/01/Implement_shared_access.html">
            
                    
                    6.3. Implement shared access signatures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="12.1.4" data-path="../../M3/01/Microsoft_graph.html">
            
                <a href="../../M3/01/Microsoft_graph.html">
            
                    
                    6.4. Explore Microsoft Graph
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="13.1" data-path="../../M3/01/lab01.html">
            
                <a href="../../M3/01/lab01.html">
            
                    
                    LAB 1 - Configure a single-tenant Azure AD environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.2" data-path="../../M3/01/lab02.html">
            
                <a href="../../M3/01/lab02.html">
            
                    
                    LAB 2 - Create a single-tenant ASP.NET web app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="13.3" data-path="../../M3/01/lab03.html">
            
                <a href="../../M3/01/lab03.html">
            
                    
                    LAB 3 - Clean up your lab environment
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="14.1" data-path="../../M3/02/">
            
                <a href="../../M3/02/">
            
                    
                    7. Implement secure cloud solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="14.1.1" data-path="../../M3/02/Implement_key_vault.html">
            
                <a href="../../M3/02/Implement_key_vault.html">
            
                    
                    7.1. Implement Azure Key Vault
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.1.2" data-path="../../M3/02/Implement_identities.html">
            
                <a href="../../M3/02/Implement_identities.html">
            
                    
                    7.2. Implement managed identities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="14.1.3" data-path="../../M3/02/Implement_app_config.html">
            
                <a href="../../M3/02/Implement_app_config.html">
            
                    
                    7.3. Implement Azure App Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="15.1" data-path="../../M3/02/lab01.html">
            
                <a href="../../M3/02/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.2" data-path="../../M3/02/lab02.html">
            
                <a href="../../M3/02/lab02.html">
            
                    
                    LAB 2 - Configure secrets and identities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.3" data-path="../../M3/02/lab03.html">
            
                <a href="../../M3/02/lab03.html">
            
                    
                    LAB 3 - Build an Azure Functions app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.4" data-path="../../M3/02/lab04.html">
            
                <a href="../../M3/02/lab04.html">
            
                    
                    LAB 4 - Access Azure Blob Storage data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="15.5" data-path="../../M3/02/lab05.html">
            
                <a href="../../M3/02/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Monitor, troubleshoot, and optimize Azure solutions</li>
        
        
    
        <li class="chapter " data-level="16.1" data-path="../../M4/01/">
            
                <a href="../../M4/01/">
            
                    
                    8. Integrate caching and content delivery within solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="16.1.1" data-path="../../M4/01/Develop_cache_redis.html">
            
                <a href="../../M4/01/Develop_cache_redis.html">
            
                    
                    8.1. Develop for Azure Cache for Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="16.1.2" data-path="../../M4/01/Develop_storage_cdn.html">
            
                <a href="../../M4/01/Develop_storage_cdn.html">
            
                    
                    8.2. Develop for storage on CDNs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="17.1" data-path="../../M4/01/lab01.html">
            
                <a href="../../M4/01/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.2" data-path="../../M4/01/lab02.html">
            
                <a href="../../M4/01/lab02.html">
            
                    
                    LAB 2 - Configure Content Delivery Network and endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.3" data-path="../../M4/01/lab03.html">
            
                <a href="../../M4/01/lab03.html">
            
                    
                    LAB 3 - Upload and configure static web content
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.4" data-path="../../M4/01/lab04.html">
            
                <a href="../../M4/01/lab04.html">
            
                    
                    LAB 4 - Use Content Delivery Network endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="17.5" data-path="../../M4/01/lab05.html">
            
                <a href="../../M4/01/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="18.1" data-path="../../M4/02/">
            
                <a href="../../M4/02/">
            
                    
                    9. Instrument solutions to support monitoring and logging
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="18.1.1" data-path="../../M4/02/Monitor_app.html">
            
                <a href="../../M4/02/Monitor_app.html">
            
                    
                    9.1. Monitor app performance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="19.1" data-path="../../M4/02/lab01.html">
            
                <a href="../../M4/02/lab01.html">
            
                    
                    LAB 1 - Create and configure Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.2" data-path="../../M4/02/lab02.html">
            
                <a href="../../M4/02/lab02.html">
            
                    
                    LAB 2 - Monitor a local web API by using Application Insights
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.3" data-path="../../M4/02/lab03.html">
            
                <a href="../../M4/02/lab03.html">
            
                    
                    LAB 3 - Monitor a web API using Application Insights
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.4" data-path="../../M4/02/lab04.html">
            
                <a href="../../M4/02/lab04.html">
            
                    
                    LAB 4 - Application Insights logging with .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="19.5" data-path="../../M4/02/lab05.html">
            
                <a href="../../M4/02/lab05.html">
            
                    
                    LAB 5 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Connect to and consume Azure services and third-party services</li>
        
        
    
        <li class="chapter " data-level="20.1" data-path="../../M5/02/">
            
                <a href="../../M5/02/">
            
                    
                    10. Implement API Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="20.1.1" data-path="../../M5/02/API_Management.html">
            
                <a href="../../M5/02/API_Management.html">
            
                    
                    10.1. Explore API Management
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="21.1" data-path="../../M5/02/lab01.html">
            
                <a href="../../M5/02/lab01.html">
            
                    
                    LAB 1 - Create an Azure App Service resource by using a Docker container image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.2" data-path="../../M5/02/lab02.html">
            
                <a href="../../M5/02/lab02.html">
            
                    
                    LAB 2 - Build an API proxy tier by using Azure API Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="21.3" data-path="../../M5/02/lab03.html">
            
                <a href="../../M5/02/lab03.html">
            
                    
                    LAB 3 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="22.1" data-path="../../M5/03/">
            
                <a href="../../M5/03/">
            
                    
                    11. Develop event-based solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="22.1.1" data-path="../../M5/03/Event_grid.html">
            
                <a href="../../M5/03/Event_grid.html">
            
                    
                    11.1. Explore Azure Event Grid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="22.1.2" data-path="../../M5/03/Event_hubs.html">
            
                <a href="../../M5/03/Event_hubs.html">
            
                    
                    11.2. Explore Azure Event Hubs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="23.1" data-path="../../M5/03/lab01.html">
            
                <a href="../../M5/03/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.2" data-path="../../M5/03/lab02.html">
            
                <a href="../../M5/03/lab02.html">
            
                    
                    LAB 2 - Create an Event Grid subscription
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.3" data-path="../../M5/03/lab03.html">
            
                <a href="../../M5/03/lab03.html">
            
                    
                    LAB 3 - Publish Event Grid events from .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="23.4" data-path="../../M5/03/lab04.html">
            
                <a href="../../M5/03/lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="24.1" data-path="../../M5/04/">
            
                <a href="../../M5/04/">
            
                    
                    12. Develop message-based solutions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="24.1.1" data-path="../../M5/04/Message_queues.html">
            
                <a href="../../M5/04/Message_queues.html">
            
                    
                    12.1. Discover Azure message queues
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Hands-on Labs</li>
        
        
    
        <li class="chapter " data-level="25.1" data-path="../../M5/04/lab01.html">
            
                <a href="../../M5/04/lab01.html">
            
                    
                    LAB 1 - Create Azure resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.2" data-path="../../M5/04/lab0.md">
            
                <span>
            
                    
                    LAB 2 - Create a .NET Core project to publish messages to a Service Bus queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.3" data-path="../../M5/04/lab03.html">
            
                <a href="../../M5/04/lab03.html">
            
                    
                    LAB 3 - Create a .NET Core project to read messages from a Service Bus queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="25.4" data-path="../../M5/04/lab04.html">
            
                <a href="../../M5/04/lab04.html">
            
                    
                    LAB 4 - Clean up your subscription
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >LAB 4 - Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="lab-4-retrieve-blob-uniform-resource-identifiers-uris-by-using-the-net-sdk">Lab 4: Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK</h2>
<h3 id="task-1-enumerate-the-blobs-in-an-existing-container-by-using-the-sdk">Task 1: Enumerate the blobs in an existing container by using the SDK</h3>
<ol>
<li><p>In the <strong>Program</strong> class, enter the following code to create a new <strong>private static</strong> method named <strong>EnumerateBlobsAsync</strong> that&apos;s asynchronous and has two parameter types, <strong>BlobServiceClient</strong> and <strong>string</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateBlobsAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
{      
}
</code></pre>
</li>
<li><p>In the <strong>EnumerateBlobsAsync</strong> method, enter the following code to get a new instance of the <strong>BlobContainerClient</strong> class by using the <strong>GetBlobContainerClient</strong> method of the <strong>BlobServiceClient</strong> class, passing in the <strong>containerName</strong> parameter:</p>
<pre><code class="lang-csharp">BlobContainerClient container = client.GetBlobContainerClient(containerName);
</code></pre>
</li>
<li><p>In the <strong>EnumerateBlobsAsync</strong> method, enter the following code to render the name of the container that will be enumerated:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Searching:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
</code></pre>
</li>
<li><p>In the <strong>EnumerateBlobsAsync</strong> method, enter the following code to create an asynchronous <strong>foreach</strong> loop that iterates over the results of an invocation of the <strong>GetBlobsAsync</strong> method of the <strong>BlobContainerClient</strong> class:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobItem blob <span class="hljs-keyword">in</span> container.GetBlobsAsync())
{        
}
</code></pre>
</li>
<li><p>Within the <strong>foreach</strong> loop, enter the following code to print the name of each blob:</p>
<pre><code class="lang-csharp"> <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Existing Blob:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
</code></pre>
</li>
<li><p>Review the <strong>EnumerateBlobsAsync</strong> method, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateBlobsAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
{      
    BlobContainerClient container = client.GetBlobContainerClient(containerName);
    <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Searching:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobItem blob <span class="hljs-keyword">in</span> container.GetBlobsAsync())
    {        
         <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Existing Blob:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
    }
}
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to create a variable named <em>existingContainerName</em> with a value of <strong>raster-graphics</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-built_in">string</span> existingContainerName = <span class="hljs-string">&quot;raster-graphics&quot;</span>;
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to invoke the <strong>EnumerateBlobsAsync</strong> method, passing in the <em>serviceClient</em> and <em>existingContainerName</em> variables as parameters:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> EnumerateBlobsAsync(serviceClient, existingContainerName);
</code></pre>
</li>
<li><p>Observe the <strong>Program.cs</strong> file, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> Azure.Storage;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs.Models;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Threading.Tasks;    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> blobServiceEndpoint = <span class="hljs-string">&quot;your blobServiceEndpoint&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountName = <span class="hljs-string">&quot;your storageAccountName&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountKey = <span class="hljs-string">&quot;your storageAccountKey&quot;</span>;    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        StorageSharedKeyCredential accountCredentials = <span class="hljs-keyword">new</span> StorageSharedKeyCredential(storageAccountName, storageAccountKey);
        BlobServiceClient serviceClient = <span class="hljs-keyword">new</span>   BlobServiceClient(<span class="hljs-keyword">new</span> Uri(blobServiceEndpoint), accountCredentials);
        AccountInfo info = <span class="hljs-keyword">await</span> serviceClient.GetAccountInfoAsync();
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Connected to Azure Storage Account&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account name:\t<span class="hljs-subst">{storageAccountName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account kind:\t<span class="hljs-subst">{info?.AccountKind}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account sku:\t<span class="hljs-subst">{info?.SkuName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> EnumerateContainersAsync(serviceClient);
        <span class="hljs-built_in">string</span> existingContainerName = <span class="hljs-string">&quot;raster-graphics&quot;</span>;
        <span class="hljs-keyword">await</span> EnumerateBlobsAsync(serviceClient, existingContainerName);
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateContainersAsync</span>(<span class="hljs-params">BlobServiceClient client</span>)</span>
    {        
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobContainerItem container <span class="hljs-keyword">in</span> client.GetBlobContainersAsync())
        {
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        }
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateBlobsAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);<span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Searching:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobItem blob <span class="hljs-keyword">in</span> container.GetBlobsAsync())
        {        
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Existing Blob:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
        }
    }
}
</code></pre>
</li>
<li><p>Save the <strong>Program.cs</strong> file.</p>
</li>
<li><p>In the <strong>Visual Studio Code</strong> window, on the Menu Bar, select <strong>Terminal</strong> and then select <strong>New Terminal</strong>.</p>
</li>
<li><p>In the terminal, run the following command to run the .NET web application:</p>
<pre><code>dotnet run
</code></pre><blockquote>
<p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>$HOME\training-az204\\Labs\03\Solution\BlobManager</strong> folder.</p>
</blockquote>
</li>
<li><p>Review the output from the currently running console application. The updated output includes metadata about the existing container and blobs.</p>
</li>
<li><p>Select <strong>Kill Terminal</strong> or the <strong>Recycle Bin</strong> icon to close the currently open terminal and any associated processes.</p>
</li>
</ol>
<h3 id="task-2-create-a-new-container-by-using-the-sdk">Task 2: Create a new container by using the SDK</h3>
<ol>
<li><p>In the <strong>Program</strong> class, enter the following code to create a new <strong>private static</strong> method named <strong>GetContainerAsync</strong> that&apos;s asynchronous and has two parameter types, <strong>BlobServiceClient</strong> and <strong>string</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobContainerClient&gt; <span class="hljs-title">GetContainerAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
{      
}
</code></pre>
</li>
<li><p>In the <strong>GetContainerAsync</strong> method, enter the following code to get a new instance of the <strong>BlobContainerClient</strong> class by using the <strong>GetBlobContainerClient</strong> method of the <strong>BlobServiceClient</strong> class, passing in the <strong>containerName</strong> parameter:</p>
<pre><code class="lang-csharp">BlobContainerClient container = client.GetBlobContainerClient(containerName);
</code></pre>
</li>
<li><p>In the <strong>GetContainerAsync</strong> method, enter the following code to invoke the <strong>CreateIfNotExistsAsync</strong> method of the <strong>BlobContainerClient</strong> class:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> container.CreateIfNotExistsAsync(PublicAccessType.Blob);
</code></pre>
</li>
<li><p>In the <strong>GetContainerAsync</strong> method, enter the following code to render the name of the container that was potentially created:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;New Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
</code></pre>
</li>
<li><p>In the <strong>GetContainerAsync</strong> method, enter the following code to return the instance of the <strong>BlobContainerClient</strong> class named <strong>container</strong> as the result of the <strong>GetContainerAsync</strong> method:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">return</span> container;
</code></pre>
</li>
<li><p>Review the <strong>GetContainerAsync</strong> method, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobContainerClient&gt; <span class="hljs-title">GetContainerAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
{      
    BlobContainerClient container = client.GetBlobContainerClient(containerName);
    <span class="hljs-keyword">await</span> container.CreateIfNotExistsAsync(PublicAccessType.Blob);
    <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;New Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);        
    <span class="hljs-keyword">return</span> container;
}
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to create a variable named <em>newContainerName</em> with a value of <strong>vector-graphics</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-built_in">string</span> newContainerName = <span class="hljs-string">&quot;vector-graphics&quot;</span>;
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to invoke the <strong>GetContainerAsync</strong> method, to pass the <em>serviceClient</em> and <em>newContainerName</em> variables as parameters, and to store the result in a variable named <em>containerClient</em> of type <strong>BlobContainerClient</strong>:</p>
<pre><code class="lang-csharp">BlobContainerClient containerClient = <span class="hljs-keyword">await</span> GetContainerAsync(serviceClient, newContainerName);
</code></pre>
</li>
<li><p>Review the <strong>Program.cs</strong> file, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> Azure.Storage;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs.Models;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Threading.Tasks;    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> blobServiceEndpoint = <span class="hljs-string">&quot;your blobServiceEndpoint&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountName = <span class="hljs-string">&quot;your storageAccountName&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountKey = <span class="hljs-string">&quot;your storageAccountKey&quot;</span>;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        StorageSharedKeyCredential accountCredentials = <span class="hljs-keyword">new</span> StorageSharedKeyCredential(storageAccountName, storageAccountKey);
        BlobServiceClient serviceClient = <span class="hljs-keyword">new</span> BlobServiceClient(<span class="hljs-keyword">new</span> Uri(blobServiceEndpoint), accountCredentials);
        AccountInfo info = <span class="hljs-keyword">await</span> serviceClient.GetAccountInfoAsync();
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Connected to Azure Storage Account&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account name:\t<span class="hljs-subst">{storageAccountName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account kind:\t<span class="hljs-subst">{info?.AccountKind}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account sku:\t<span class="hljs-subst">{info?.SkuName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> EnumerateContainersAsync(serviceClient);
        <span class="hljs-built_in">string</span> existingContainerName = <span class="hljs-string">&quot;raster-graphics&quot;</span>;
        <span class="hljs-keyword">await</span> EnumerateBlobsAsync(serviceClient, existingContainerName);
        <span class="hljs-built_in">string</span> newContainerName = <span class="hljs-string">&quot;vector-graphics&quot;</span>;
        BlobContainerClient containerClient = <span class="hljs-keyword">await</span> GetContainerAsync(serviceClient, newContainerName);
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateContainersAsync</span>(<span class="hljs-params">BlobServiceClient client</span>)</span>
    {        
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobContainerItem container <span class="hljs-keyword">in</span> client.GetBlobContainersAsync())
        {
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        }
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateBlobsAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);<span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Searching:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobItem blob <span class="hljs-keyword">in</span> container.GetBlobsAsync())
        {        
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Existing Blob:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
        }
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobContainerClient&gt; <span class="hljs-title">GetContainerAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);
        <span class="hljs-keyword">await</span> container.CreateIfNotExistsAsync(PublicAccessType.Blob);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;New Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        <span class="hljs-keyword">return</span> container;
    }
}
</code></pre>
</li>
<li><p>Save the <strong>Program.cs</strong> file.</p>
</li>
<li><p>In the <strong>Visual Studio Code</strong> window, on the Menu Bar, select <strong>Terminal</strong> and then select <strong>New Terminal</strong>.</p>
</li>
<li><p>In the terminal, run the following command to run the .NET web application:</p>
<pre><code>dotnet run
</code></pre><blockquote>
<p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>$HOME\training-az204\Labs\03\Solution\BlobManager</strong> folder.</p>
</blockquote>
</li>
<li><p>Observe the output from the currently running console application. The updated output includes metadata about the existing container and blobs.</p>
</li>
<li><p>Select <strong>Kill Terminal</strong> or the <strong>Recycle Bin</strong> icon to close the currently open terminal and any associated processes.</p>
</li>
</ol>
<h3 id="task-3-upload-a-new-blob-by-using-the-portal">Task 3: Upload a new blob by using the portal</h3>
<ol>
<li><p>On the Azure portal&apos;s <strong>navigation</strong> pane, select the <strong>Resource groups</strong> link.</p>
</li>
<li><p>On the <strong>Resource groups</strong> blade, select the <strong>StorageMedia</strong> resource group that you created previously in this lab.</p>
</li>
<li><p>On the <strong>StorageMedia</strong> blade, select the <strong>mediastor</strong><em>[yourname]</em> storage account that you created previously in this lab.</p>
</li>
<li><p>On the <strong>Storage account</strong> blade, select the <strong>Containers</strong> link in the <strong>Data storage</strong> section.</p>
</li>
<li><p>In the <strong>Containers</strong> section, select the newly created <strong>vector-graphics</strong> container. You might need to refresh the page to observe the new container.</p>
</li>
<li><p>On the <strong>Container</strong> blade, select <strong>Upload</strong>.</p>
</li>
<li><p>In the <strong>Upload blob</strong> window, perform the following actions, and then select <strong>Upload</strong>:</p>
<p>| Setting | Action |
| -- | -- |
| <strong>Files</strong> section   Select the <strong>Folder</strong> icon |
| <strong>File Explorer</strong> window |  <strong>$HOME\training-az204\Labs\03\Starter\Images</strong>, select the <strong>graph.svg</strong> file, and then select <strong>Open</strong> |
| <strong>Overwrite if files already exist</strong> check box | Ensure that the check box is selected |</p>
<blockquote>
<p><strong>Note</strong>: Wait for the blob to upload before you continue with this lab.</p>
</blockquote>
</li>
</ol>
<h3 id="task-4-access-blob-uri-by-using-the-sdk">Task 4: Access blob URI by using the SDK</h3>
<ol>
<li><p>Switch to the <strong>Visual Studio Code</strong> window.</p>
</li>
<li><p>In the <strong>Program</strong> class, enter the following code to create a new <strong>private static</strong> method named <strong>GetBlobAsync</strong> that&apos;s asynchronous and has two parameter types, <strong>BlobContainerClient</strong> and <strong>string</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobClient&gt; <span class="hljs-title">GetBlobAsync</span>(<span class="hljs-params">BlobContainerClient client, <span class="hljs-built_in">string</span> blobName</span>)</span>
{      
}
</code></pre>
</li>
<li><p>In the <strong>GetBlobAsync</strong> method, enter the following code to get a new instance of the <strong>BlobClient</strong> class by using the <strong>GetBlobClient</strong> method of the <strong>BlobContainerClient</strong> class, and to pass in the <strong>blobName</strong> parameter:</p>
<pre><code class="lang-csharp">BlobClient blob = client.GetBlobClient(blobName);
</code></pre>
</li>
<li><p>In the <strong>GetBlobAsync</strong> method, enter the following code to render the name of the blob that was referenced:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Blob Found:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
</code></pre>
</li>
<li><p>In the <strong>GetBlobAsync</strong> method, enter the following code to return the instance of the <strong>BlobClient</strong> class named <strong>blob</strong> as the result of the <strong>GetBlobAsync</strong> method:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">return</span> blob;
</code></pre>
</li>
<li><p>Review the <strong>GetBlobAsync</strong> method, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobClient&gt; <span class="hljs-title">GetBlobAsync</span>(<span class="hljs-params">BlobContainerClient client, <span class="hljs-built_in">string</span> blobName</span>)</span>
{      
    BlobClient blob = client.GetBlobClient(blobName);
    <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Blob Found:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
    <span class="hljs-keyword">return</span> blob;
}
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to create a variable named <em>uploadedBlobName</em> with a value of <strong>graph.svg</strong>:</p>
<pre><code class="lang-csharp"><span class="hljs-built_in">string</span> uploadedBlobName = <span class="hljs-string">&quot;graph.svg&quot;</span>;
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to invoke the <strong>GetBlobAsync</strong> method, passing in the <em>containerClient</em> and <em>uploadedBlobName</em> variables as parameters, and to store the result in a variable named <em>blobClient</em> of type <strong>BlobClient</strong>:</p>
<pre><code class="lang-csharp">BlobClient blobClient = <span class="hljs-keyword">await</span> GetBlobAsync(containerClient, uploadedBlobName);
</code></pre>
</li>
<li><p>In the <strong>Main</strong> method, enter the following code at the end of the method to render the <strong>Uri</strong> property of the <em>blobClient</em> variable:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Blob Url:\t<span class="hljs-subst">{blobClient.Uri}</span>&quot;</span>);
</code></pre>
</li>
<li><p>Observe the <strong>Program.cs</strong> file, which should now include:</p>
<pre><code class="lang-csharp"><span class="hljs-keyword">using</span> Azure.Storage;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs;
<span class="hljs-keyword">using</span> Azure.Storage.Blobs.Models;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Threading.Tasks;    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> blobServiceEndpoint = <span class="hljs-string">&quot;your blobServiceEndpoint&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountName = <span class="hljs-string">&quot;your storageAccountName&quot;</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> storageAccountKey = <span class="hljs-string">&quot;your storageAccountKey&quot;</span>;    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        StorageSharedKeyCredential accountCredentials = <span class="hljs-keyword">new</span> StorageSharedKeyCredential(storageAccountName, storageAccountKey);
        BlobServiceClient serviceClient = <span class="hljs-keyword">new</span> BlobServiceClient(<span class="hljs-keyword">new</span> Uri(blobServiceEndpoint), accountCredentials);
        AccountInfo info = <span class="hljs-keyword">await</span> serviceClient.GetAccountInfoAsync();
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Connected to Azure Storage Account&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account name:\t<span class="hljs-subst">{storageAccountName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account kind:\t<span class="hljs-subst">{info?.AccountKind}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Account sku:\t<span class="hljs-subst">{info?.SkuName}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> EnumerateContainersAsync(serviceClient);
        <span class="hljs-built_in">string</span> existingContainerName = <span class="hljs-string">&quot;raster-graphics&quot;</span>;
        <span class="hljs-keyword">await</span> EnumerateBlobsAsync(serviceClient, existingContainerName);
        <span class="hljs-built_in">string</span> newContainerName = <span class="hljs-string">&quot;vector-graphics&quot;</span>;
        BlobContainerClient containerClient = <span class="hljs-keyword">await</span> GetContainerAsync(serviceClient, newContainerName);
        <span class="hljs-built_in">string</span> uploadedBlobName = <span class="hljs-string">&quot;graph.svg&quot;</span>;
        BlobClient blobClient = <span class="hljs-keyword">await</span> GetBlobAsync(containerClient, uploadedBlobName);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Blob Url:\t<span class="hljs-subst">{blobClient.Uri}</span>&quot;</span>);
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateContainersAsync</span>(<span class="hljs-params">BlobServiceClient client</span>)</span>
    {        
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobContainerItem container <span class="hljs-keyword">in</span> client.GetBlobContainersAsync())
        {
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        }
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">EnumerateBlobsAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Searching:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (BlobItem blob <span class="hljs-keyword">in</span> container.GetBlobsAsync())
        {        
            <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Existing Blob:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
        }
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobContainerClient&gt; <span class="hljs-title">GetContainerAsync</span>(<span class="hljs-params">BlobServiceClient client, <span class="hljs-built_in">string</span> containerName</span>)</span>
    {      
        BlobContainerClient container = client.GetBlobContainerClient(containerName);

        <span class="hljs-keyword">await</span> container.CreateIfNotExistsAsync(PublicAccessType.Blob);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;New Container:\t<span class="hljs-subst">{container.Name}</span>&quot;</span>);
        <span class="hljs-keyword">return</span> container;
    }        
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task&lt;BlobClient&gt; <span class="hljs-title">GetBlobAsync</span>(<span class="hljs-params">BlobContainerClient client, <span class="hljs-built_in">string</span> blobName</span>)</span>
    {      
        BlobClient blob = client.GetBlobClient(blobName);
        <span class="hljs-keyword">await</span> Console.Out.WriteLineAsync(<span class="hljs-string">$&quot;Blob Found:\t<span class="hljs-subst">{blob.Name}</span>&quot;</span>);
        <span class="hljs-keyword">return</span> blob;
    }
}
</code></pre>
</li>
<li><p>Save the <strong>Program.cs</strong> file.</p>
</li>
<li><p>In the <strong>Visual Studio Code</strong> window, activate the shortcut menu for the <strong>Explorer</strong> pane, and then select <strong>Open in Integrated Terminal</strong>.</p>
</li>
<li><p>At the open command prompt, run the following command to run the .NET web application:</p>
<pre><code>dotnet run
</code></pre><blockquote>
<p><strong>Note</strong>: If there are any build errors, review the <strong>Program.cs</strong> file in the <strong>$HOME\training-az204\Labs\03\Solution\BlobManager</strong> folder.</p>
</blockquote>
</li>
<li><p>Observe the output from the currently running console application. The updated output includes the final URL to access the blob online. Record the value of this URL to use later in the lab.</p>
<blockquote>
<p><strong>Note</strong>: The URL will likely be similar to the following string: <code>https://mediastor*[yourname]*.blob.core.windows.net/vector-graphics/graph.svg</code></p>
</blockquote>
</li>
<li><p>Select <strong>Kill Terminal</strong> or the <strong>Recycle Bin</strong> icon to close the currently open terminal and any associated processes.</p>
</li>
</ol>
<h3 id="task-5-test-the-uri-by-using-a-browser">Task 5: Test the URI by using a browser</h3>
<ol>
<li><p>On the taskbar, activate the shortcut menu for the <strong>Microsoft Edge</strong> icon, and then select <strong>New window</strong>.</p>
</li>
<li><p>In the new browser window, refer to the URL that you previously copied in this lab for the blob.</p>
</li>
<li><p>You should now notice the Scalable Vector Graphics (SVG) file in your browser window.</p>
</li>
</ol>
<h2 id="review">Review</h2>
<p>In this exercise, you created containers and managed blobs by using the Storage SDK.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="lab03.html" class="navigation navigation-prev " aria-label="Previous page: LAB 3 - Access containers by using the .NET SDK">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lab05.html" class="navigation navigation-next " aria-label="Next page: LAB 5 - Clean up your subscription">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"LAB 4 - Retrieve blob Uniform Resource Identifiers (URIs) by using the .NET SDK","level":"11.4","depth":1,"next":{"title":"LAB 5 - Clean up your subscription","level":"11.5","depth":1,"path":"M2/02/lab05.md","ref":"M2/02/lab05.md","articles":[]},"previous":{"title":"LAB 3 - Access containers by using the .NET SDK","level":"11.3","depth":1,"path":"M2/02/lab03.md","ref":"M2/02/lab03.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"M2/02/lab04.md","mtime":"2022-12-23T20:58:36.965Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2022-12-23T21:00:22.927Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

